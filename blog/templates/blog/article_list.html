{% extends "base.html" %}
{% load static %}
{% load static compress %}


{% block head_title %}{{ block.super }} | Blog{% endblock head_title %}


{% block content %}

{% compress css %}
<link rel="stylesheet" type="text/css" href="{% static 'css/paginator.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/blog.css' %}">
{% endcompress %}

{% include 'repo/snippets/paginator_snippet.html' with licks=articles %}

{% if request.user.is_staff %}
<a href="{% url 'blog:article-create' %}" class="btn btn-success" role="button">New article</a>
{% endif %}
<br>
<form method="GET" action="">
    <div class="input-group">
        <input class="form-control" type="text" name="q" placeholder="Search articles" value="{{ request.GET.q }}">
        <button class="btn btn-secondary" type="submit">Search <span class="icon icon-search"></span></button>
    </div>

</form>

{% for article in articles %}
<section class="panel">
    <article>
        <h2><a href="{{ article.get_absolute_url }}">{{ article.title }}</a>
            {% if article.date_published > today %}<span style="color:red;"> (Future Post)</span>{% endif %}
        </h2>
        <header class="article-header">
            <div class="article-metadata">
                <p><small>{{ article.author }} | {% if article.draft %}<span style="color:red;">Draft</span>{% endif %} {{ article.date_published }}</small></p>
                <p>{{ article.description }}</p>
            </div>
            <div class="article-image">
                {% if article.image %}
                <img src="{{article.image.url}}" class='img-responsive'>
                {% endif %}
            </div>
        </header>
        <hr>
        <div class="article-content-preview">
            <p>{{ article.get_markdown|truncatechars_html:155 }}</p>
            <p><a href="{{ article.get_absolute_url }}" class="btn btn-primary" role="button">View</a></p>
        </div>
    </article>
</section>
{% endfor%}

{% include 'repo/snippets/paginator_snippet.html' with licks=articles %}

{% endblock content %}
